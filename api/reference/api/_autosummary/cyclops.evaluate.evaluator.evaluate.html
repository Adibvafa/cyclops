





<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>cyclops.evaluate.evaluator.evaluate &mdash; cyclops  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/cyclops.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="cyclops.evaluate.metrics.metric" href="cyclops.evaluate.metrics.metric.html" />
    <link rel="prev" title="cyclops.evaluate.evaluator" href="cyclops.evaluate.evaluator.html" /> 
</head>

<body class="wy-body-for-nav">
  <!--
    Lie about what theme we really are when some RTD-injected JS fetches the
    full versions panel from the RTD API.  RTD's JS replaces the stub versions
    panel in the Sphinx-generated HTML with the full versions panel it fetches
    from the RTD API.  If the API thinks we're not sphinx_rtd_theme, it will
    serve us the wrong HTML and the panel will float as a "badge" when it
    shouldn't.  As a customized version of sphinx_rtd_theme, we really do want
    the same HTML it gets.  See also the diagnoses in
    <https://github.com/nextstrain/docs.nextstrain.org/issues/76>.

    This bit of JS finds the data RTD injects into the page and modifies it
    before the code that RTD injects runs and looks at the data.  RTD's
    <script>s (in <head>) run before this JS, but they wait until the DOM is
    ready to actually do any work.  This gives us a chance to modify the data
    during DOM load before the RTD code actually uses it.

      -trs, 27 Jan 2022
  -->
  <script>
    (() => {
      try {
        console.log("Lying about the theme to RTD's JS so the versions panel works properly. üôà");

        /* Update global variable, which is used in the request to get the RTD
         * "footer" that includes the versions panel.
         */
        if (window.READTHEDOCS_DATA)
          window.READTHEDOCS_DATA.theme = "sphinx_rtd_theme";

        /* Update stored JSON in case anything else deserializes it later.
         * Comments in the RTD-injected HTML source claim the global variable
         * above is deprecated.
         */
        var script = document.querySelector("#READTHEDOCS_DATA");
        if (script)
          script.innerHTML = JSON.stringify({ ...JSON.parse(script.innerHTML), theme: "sphinx_rtd_theme" });
      }
      catch (err) {
        console.log("Lying about the theme to RTD's JS failed‚Ä¶ oh well. ü§∑", err);
      }
    })();
  </script>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #efeeed" >




  <a href="https://vectorinstitute.github.io/cyclops/">
    <img src="../../../_static/cyclops_logo-dark.png" class="logo" alt="Logo"/>
  </a>



  <div class="subproject">
    <a href="../../../index.html" class="project-name" alt="Documentation Home">
      cyclops
    </a>

    
    
    

  </div>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">üê£ Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html#developing">üßëüèø‚Äçüíª Developing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html#documentation">üìö Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html#notebooks">üìì Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html#citation">üéì Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributing to cyclops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../api.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cyclops.query.html">cyclops.query</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cyclops.data.html">cyclops.data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cyclops.tasks.html">cyclops.tasks</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../cyclops.evaluate.html">cyclops.evaluate</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="cyclops.evaluate.evaluator.html">cyclops.evaluate.evaluator</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">cyclops.evaluate.evaluator.evaluate</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cyclops.evaluate.html#module-cyclops.evaluate.metrics">cyclops.evaluate.metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cyclops.evaluate.html#module-cyclops.evaluate.metrics.functional">cyclops.evaluate.metrics.functional</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cyclops.evaluate.html#module-cyclops.evaluate.fairness">cyclops.evaluate.fairness</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cyclops.monitor.html">cyclops.monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cyclops.report.html">cyclops.report</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #efeeed" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">cyclops</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  

  
  
    <li><a href="https://vectorinstitute.github.io/cyclops/">Home</a></li>
    <li><a href="../../../index.html">cyclops</a></li>
  

  
  
    <li><a href="../../../api.html">API Reference</a></li>
  
    <li><a href="../cyclops.evaluate.html">cyclops.evaluate</a></li>
  
    <li><a href="cyclops.evaluate.evaluator.html">cyclops.evaluate.evaluator</a></li>
  

  

      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/reference/api/_autosummary/cyclops.evaluate.evaluator.evaluate.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cyclops-evaluate-evaluator-evaluate">
<h1>cyclops.evaluate.evaluator.evaluate<a class="headerlink" href="#cyclops-evaluate-evaluator-evaluate" title="Permalink to this headline">ÔÉÅ</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="cyclops.evaluate.evaluator.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_column_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'predictions'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transforms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slice_spec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fairness_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_fairness_metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load_dataset_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cyclops/evaluate/evaluator.html#evaluate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cyclops.evaluate.evaluator.evaluate" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Evaluate one or more models on a dataset using one or more metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<a class="reference internal" href="cyclops.query.ops.Union.html#cyclops.query.ops.Union" title="cyclops.query.ops.Union"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>Dataset</em><em>, </em><em>DatasetDict</em><em>]</em>) ‚Äì The dataset to evaluate on. If a string, the dataset will be loaded
using <cite>datasets.load_dataset</cite>. If <cite>DatasetDict</cite>, the <cite>split</cite> argument
must be specified.</p></li>
<li><p><strong>metrics</strong> (<a class="reference internal" href="cyclops.query.ops.Union.html#cyclops.query.ops.Union" title="cyclops.query.ops.Union"><em>Union</em></a><em>[</em><a class="reference internal" href="cyclops.evaluate.metrics.metric.Metric.html#cyclops.evaluate.metrics.metric.Metric" title="cyclops.evaluate.metrics.metric.Metric"><em>Metric</em></a><em>, </em><em>Sequence</em><em>[</em><a class="reference internal" href="cyclops.evaluate.metrics.metric.Metric.html#cyclops.evaluate.metrics.metric.Metric" title="cyclops.evaluate.metrics.metric.Metric"><em>Metric</em></a><em>]</em><em>, </em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><a class="reference internal" href="cyclops.evaluate.metrics.metric.Metric.html#cyclops.evaluate.metrics.metric.Metric" title="cyclops.evaluate.metrics.metric.Metric"><em>Metric</em></a><em>]</em><em>, </em><a class="reference internal" href="cyclops.evaluate.metrics.metric.MetricCollection.html#cyclops.evaluate.metrics.metric.MetricCollection" title="cyclops.evaluate.metrics.metric.MetricCollection"><em>MetricCollection</em></a><em>]</em>) ‚Äì The metrics to compute.</p></li>
<li><p><strong>target_columns</strong> (<a class="reference internal" href="cyclops.query.ops.Union.html#cyclops.query.ops.Union" title="cyclops.query.ops.Union"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>]</em><em>]</em>) ‚Äì The name of the column(s) containing the target values.</p></li>
<li><p><strong>feature_columns</strong> (<a class="reference internal" href="cyclops.query.ops.Union.html#cyclops.query.ops.Union" title="cyclops.query.ops.Union"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>]</em><em>]</em><em>, </em><em>optional</em>) ‚Äì The name of the column(s) containing the feature values. This must be provided
if <cite>models</cite> is not None.</p></li>
<li><p><strong>prediction_column_prefix</strong> (<a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) ‚Äì The prefix of the column(s) containing the predictions. If <cite>models</cite> is not
None, the predictions will be added to the dataset and the column names will
be <cite>{prediction_column_prefix}.{model_name}</cite>. If <cite>models</cite> is None, the
predictions will be read from the dataset and the column names must start
with <cite>prediction_column_prefix</cite>.</p></li>
<li><p><strong>remove_columns</strong> (<a class="reference internal" href="cyclops.query.ops.Union.html#cyclops.query.ops.Union" title="cyclops.query.ops.Union"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>]</em><em>]</em><em>, </em><em>optional</em>) ‚Äì The name of the column(s) to remove from the dataset before filtering
and computing metrics. This is useful if the dataset contains columns
that are not needed for computing metrics but may be expensive to
keep in memory (e.g. image columns).</p></li>
<li><p><strong>models</strong> (<a class="reference internal" href="cyclops.query.ops.Union.html#cyclops.query.ops.Union" title="cyclops.query.ops.Union"><em>Union</em></a><em>[</em><em>WrappedModel</em><em>, </em><em>Sequence</em><em>[</em><em>WrappedModel</em><em>]</em><em>, </em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>WrappedModel</em><em>]</em><em>]</em>) ‚Äì The model(s) to evaluate. If a <cite>Sequence</cite> of <cite>WrappedModel</cite>, each model will
be evaluated on the entire dataset and the model class name will be used as
the model name. If a <cite>Dict</cite> of <cite>WrappedModel</cite>, each model will be evaluated
on the entire dataset and the keys will be used as the model names.</p></li>
<li><p><strong>transforms</strong> (<em>Callable</em><em>, </em><em>optional</em>) ‚Äì A function that transforms the dataset before doing inference. This is
useful if the dataset needs to be transformed before being passed to
the model.</p></li>
<li><p><strong>slice_spec</strong> (<a class="reference internal" href="cyclops.data.slicer.SliceSpec.html#cyclops.data.slicer.SliceSpec" title="cyclops.data.slicer.SliceSpec"><em>SliceSpec</em></a><em>, </em><em>optional</em>) ‚Äì The slice specification to use for computing metrics. If None, no slices
will be computed - the metrics will be computed on the entire dataset.
Note that this is not used for computing fairness metrics.</p></li>
<li><p><strong>split</strong> (<a class="reference internal" href="cyclops.query.ops.Union.html#cyclops.query.ops.Union" title="cyclops.query.ops.Union"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>Split</em><em>]</em><em>, </em><em>optional</em>) ‚Äì The split of the dataset to use. If None and <cite>dataset</cite> is a string, a
split will be chosen based on the available splits in the dataset. The
first split that matches one of the following in order will be chosen:
(‚Äútest‚Äù, ‚Äútesting‚Äù, ‚Äúeval‚Äù, ‚Äúevaluation‚Äù, ‚Äúvalidation‚Äù, ‚Äúval‚Äù, ‚Äúvalid‚Äù,
‚Äúdev‚Äù, ‚Äútrain‚Äù, ‚Äútraining‚Äù)
If <cite>dataset</cite> is a <cite>DatasetDict</cite>, this must be specified.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3.9/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) ‚Äì The batch size to use when computing metrics. If None or a negative
integer, the entire dataset will be loaded into memory and metrics
will be computed in one batch.</p></li>
<li><p><strong>fairness_config</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="cyclops.evaluate.fairness.config.FairnessConfig.html#cyclops.evaluate.fairness.config.FairnessConfig" title="cyclops.evaluate.fairness.config.FairnessConfig"><em>FairnessConfig</em></a><em>]</em><em>, </em><em>optional</em>) ‚Äì The configuration for computing fairness metrics. If None, no fairness
metrics will be computed. Before computing fairness metrics, the following
arguments in the configuration will be overridden by the arguments provided
to this function: <cite>dataset</cite>, <cite>target_columns</cite>, <cite>prediction_columns</cite>,
<cite>remove_columns</cite>, and <cite>batch_size</cite>. If <cite>override_fairness_metrics</cite> is True,
the metrics in the configuration will be overridden by the metrics provided
to this function.</p></li>
<li><p><strong>override_fairness_metrics</strong> (<a class="reference external" href="https://docs.python.org/3.9/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default=True</em>) ‚Äì If True, the <cite>metrics</cite> argument in fairness_config will be overridden by
the <cite>metrics</cite> argument provided to this function.</p></li>
<li><p><strong>load_dataset_kwargs</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>Any</em><em>]</em><em>, </em><em>optional</em>) ‚Äì Keyword arguments to pass to <cite>datasets.load_dataset</cite>. Only used if
<cite>dataset</cite> is a string.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary containing the results of the evaluation.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[<a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)">str</a>, Any]</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.9/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> ‚Äì <ul class="simple">
<li><p>If <cite>dataset</cite> is a <cite>DatasetDict</cite> and <cite>split</cite> is None.
    - If <cite>models</cite> is None and <cite>dataset</cite> does not have a column that starts
      with <cite>prediction_column_prefix</cite>.
    - If <cite>models</cite> is not None and <cite>feature_columns</cite> is None.
    - If multiple models are provided and only one set of results is found
      after computing metrics.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cyclops.evaluate.evaluator.html" class="btn btn-neutral float-left" title="cyclops.evaluate.evaluator" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cyclops.evaluate.metrics.metric.html" class="btn btn-neutral float-right" title="cyclops.evaluate.metrics.metric" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  

  <div class="footer-small-text">
    All <a href="https://github.com/VectorInstitute/cyclops">source code for cyclops</a> is freely available under the terms of an <a href="https://opensource.org/licenses/Apache-2.0">Apache-2.0</a> license.
  </div>

  <div class="footer-small-text">
      This work is made possible due to the data obtained from the <a href="https://www.geminimedicine.ca/">GEMINI study</a>.
  </div>

  <hr/>

  <div class="logo">
    <a class="logo" href="https://vectorinstitute.ai/">
      <span class="logo"></span>
      <img alt="Logo of the Vector Institute" style="width:90px; max-width:90px;" src="../../../_static/logos/vector_logo.png" />
    </a>
    <a class="logo" href="https://www.geminimedicine.ca/">
      <span class="logo"></span>
      <img alt="Logo of GEMINI" style="width:90px; max-width:90px;" src="../../../_static/logos/gemini_logo.png" />
    </a>
  </div>

  <div class="copyright">
    &copy; Copyright 2022, Vector AI Engineering
  </div>

  <div class="copyright">
    </p>
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using customised version of
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">base theme</a> provided by
    <a href="https://readthedocs.org">Read the Docs</a>.
  </div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>